{% extends 'base.html' %}

{% block icon %}<i class="fas fa-th-large"></i>{% endblock %}
{% block title %}System Overview{% endblock %}

{% block content %}
<div class="welcome-banner"
    style="margin-bottom: 30px; padding: 40px; background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1)); border-radius: 24px; border: 1px solid rgba(255,255,255,0.05); position: relative; overflow: hidden; animation: pageEnter 0.6s ease-out;">
    <div style="position: relative; z-index: 2;">
        <h2 style="font-size: 2rem; font-weight: 800; margin-bottom: 10px; color: var(--text-main);">Welcome Back, {{
            current_user.username }}!</h2>
        <p style="color: var(--text-muted); font-size: 1.1rem; max-width: 600px;">Your intelligent scheduling
            environment is active. All secondary constraints and parities are currently satisfied.</p>
    </div>
    <div
        style="position: absolute; right: -50px; bottom: -50px; font-size: 15rem; color: rgba(255,255,255,0.03); transform: rotate(-15deg);">
        <i class="fas fa-calendar-check"></i>
    </div>
</div>
<div class="status-bar" style="display: flex; gap: 20px; margin-bottom: 30px; animation: fadeIn 1s ease;">
    <div class="card"
        style="flex: 1; padding: 15px 25px; margin-bottom: 0; display: flex; align-items: center; justify-content: space-between; border-left: 4px solid #10b981;">
        <div>
            <span
                style="font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px;">System
                Status</span>
            <div style="font-weight: 700; color: #10b981;"><i class="fas fa-check-circle"></i> Fully Optimized</div>
        </div>
        <div class="pulse"
            style="width: 10px; height: 10px; background: #10b981; border-radius: 50%; box-shadow: 0 0 10px #10b981;">
        </div>
    </div>
    <div class="card"
        style="flex: 1; padding: 15px 25px; margin-bottom: 0; display: flex; align-items: center; justify-content: space-between; border-left: 4px solid var(--primary);">
        <div>
            <span
                style="font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px;">Clash
                Detection</span>
            <div style="font-weight: 700; color: var(--text-main);">0 Conflicts Found</div>
        </div>
        <i class="fas fa-shield-virus" style="color: var(--primary); opacity: 0.5;"></i>
    </div>
    <div class="card"
        style="flex: 1; padding: 15px 25px; margin-bottom: 0; display: flex; align-items: center; justify-content: space-between; border-left: 4px solid #f59e0b;">
        <div>
            <span
                style="font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px;">Intelligence
                Score</span>
            <div style="font-weight: 700; color: #f59e0b;">98.4%</div>
        </div>
        <i class="fas fa-chart-line" style="color: #f59e0b; opacity: 0.5;"></i>
    </div>
</div>

<div class="upload-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
    <div class="card" style="text-align: center;">
        <i class="fas fa-building text-primary" style="font-size: 2rem; margin-bottom: 15px;"></i>
        <h3 style="font-size: 0.9rem; color: var(--gray);">Departments</h3>
        <p style="font-size: 1.8rem; font-weight: 700; margin: 10px 0;">{{ counts.departments }}</p>
        <a href="{{ url_for('main.departments') }}" class="btn btn-light btn-sm" style="font-size: 0.8rem;">View All</a>
    </div>

    <div class="card" style="text-align: center;">
        <i class="fas fa-user-tie text-success" style="font-size: 2rem; margin-bottom: 15px;"></i>
        <h3 style="font-size: 0.9rem; color: var(--gray);">Teachers</h3>
        <p style="font-size: 1.8rem; font-weight: 700; margin: 10px 0;">{{ counts.teachers }}</p>
        <a href="{{ url_for('main.teachers') }}" class="btn btn-light btn-sm" style="font-size: 0.8rem;">View All</a>
    </div>

    <div class="card" style="text-align: center;">
        <i class="fas fa-book text-warning" style="font-size: 2rem; margin-bottom: 15px;"></i>
        <h3 style="font-size: 0.9rem; color: var(--gray);">Subjects</h3>
        <p style="font-size: 1.8rem; font-weight: 700; margin: 10px 0;">{{ counts.courses }}</p>
        <a href="{{ url_for('main.courses') }}" class="btn btn-light btn-sm" style="font-size: 0.8rem;">View All</a>
    </div>

    <div class="card" style="text-align: center;">
        <i class="fas fa-door-open text-danger" style="font-size: 2rem; margin-bottom: 15px;"></i>
        <h3 style="font-size: 0.9rem; color: var(--gray);">Classrooms</h3>
        <p style="font-size: 1.8rem; font-weight: 700; margin: 10px 0;">{{ counts.classrooms }}</p>
        <a href="{{ url_for('main.classrooms') }}" class="btn btn-light btn-sm" style="font-size: 0.8rem;">View All</a>
    </div>
</div>

{% if current_user.role == 'admin' %}
<div class="card">
    <div class="card-header">
        <h3><i class="fas fa-tasks"></i> Quick Actions</h3>
    </div>
    <div style="display: flex; gap: 15px;">
        <form action="{{ url_for('main.generate') }}" method="POST">
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-magic"></i> Generate Timetable
            </button>
        </form>
        <a href="{{ url_for('main.upload_csv') }}" class="btn btn-light">
            <i class="fas fa-file-upload"></i> Bulk Data Upload
        </a>
    </div>
</div>

<div class="card" style="margin-top: 30px; border-left: 4px solid var(--primary);">
    <div class="card-header">
        <h3><i class="fas fa-brain"></i> System Intelligence Highlights</h3>
    </div>
    <div
        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; padding: 10px 0;">
        <div style="padding: 15px; background: rgba(99, 102, 241, 0.05); border-radius: 12px;">
            <h4 style="color: var(--primary); font-size: 0.95rem; margin-bottom: 8px;"><i class="fas fa-shield-alt"></i>
                Triple-Conflict Prevention</h4>
            <p style="font-size: 0.82rem; color: var(--text-muted); line-height: 1.5;">Simultaneously validates Teacher
                availability, Classroom capacity, and Department batch constraints to ensure zero clashes.</p>
        </div>
        <div style="padding: 15px; background: rgba(16, 185, 129, 0.05); border-radius: 12px;">
            <h4 style="color: #10b981; font-size: 0.95rem; margin-bottom: 8px;"><i class="fas fa-microscope"></i>
                Intelligent Lab Allocation</h4>
            <p style="font-size: 0.82rem; color: var(--text-muted); line-height: 1.5;">Automatically schedules 3-period
                practical blocks at optimal start times (10:50 AM / 2:00 PM) for efficiency.</p>
        </div>
        <div style="padding: 15px; background: rgba(245, 158, 11, 0.05); border-radius: 12px;">
            <h4 style="color: #f59e0b; font-size: 0.95rem; margin-bottom: 8px;"><i class="fas fa-robot"></i> Smart
                Activity Logic</h4>
            <p style="font-size: 0.82rem; color: var(--text-muted); line-height: 1.5;">Dynamically assigns Activity
                classes to late-day slots and intelligently links them to the preceding subject's teacher.</p>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}